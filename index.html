<!DOCTYPE html>
<html>
  <link rel="stylesheet" type="text/css" href="build/build.css">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head>
  <title>Cucumber, Protractor and BDD</title>
  <body>
    <article>
      <section>
        <h1>Lessons Learned: </h1>
        <h2>CucumberJS &amp; Protractor</h2>
      </section>
      <section>
        <ul>
          <li><h2>Overview</h2></li>
          <li>The theory: What we're trying to do</li>
          <li>The practical: The implementation of Protractor, Cucumber </li>
        </ul>
      </section>
      <section>
        <ul>
          <li><h3> Preface:</h3></li>
          <li>Work in progress</li>
          <li>Socratic defense: I have no idea what I'm doing </li>
          <li>This ought to be viewed as part of wider discussions about the economics of testing</li>
          <li>this is a `trench dispatch`, not a set of best-practices</li>
        </ul>
      </section>
      <Section>
        <h3>The business objective: Continuous Delivery </h3>
        <ul>
          <li>Context: AngularJS, Mobile development</li>
          <li>Protractor - Selenium for AngularJS</li>
          <li>CucumberJS - A BDD Syntax methodology: 
            <pre><b>Given</b> The user is logged in
<b>When</b> The user clicks on on the "edit" button
<b>Then</b> The edit modal should appear </pre>
            <p>Theory: take acceptance criteria, make tests, make tests pass</p>
          </li>
        </ul>
      </Section>
      <section>
        <h3>Technical Intent</h3>
        <ul>
          <p>BDD's ideals: Minimizing crossover and waste between team functions</p>
          <p>'top down' approach for testing for developers</p>
          <p>Remove Fragility, make devs aware of automation</p>
          <p>The future: mobile automation and testing</p>
        </ul>
      </section>
      <section>
        <h3>
          The case for e2e testing for devs
          <img src="images/pyramid.png">
          <p>Source: Martin Fowler</p>
        </h3>
      </section>
      <section><img width="100%" height="100%" src="images/testing.png"></section>
      <section>
        <h3>Why should you care?</h3>
        <ul>
          <li>Slow to run, but enormous coverage written fast </li>
          <li>True integration - tests everything </li>
          <li>Provides certainty, continuous delivery probably impossible without it </li>
        </ul>
      </section>
      <section>
        <h3>To use Cucumber or Jasmine frameworks?  </h3>
        <p><i>"Will the team (everyone, not only the tech people) benefit from scenarios written in plain English?  Is there a chance it'll help someone understand things better and communicate more efficiently?" <br /> <a href="http://www.infoq.com/news/2014/04/cucumberjs-bdd-biezemans"> Julien Biezemans, Interview with infoQ</a></i></p>
        <p>Not sure? use Jasmine, Cucumber's use cases are narrow, may work for us, probably not for everyone. </p>
      </section>
      <section>
        <p><b>Using Cucumber...</b>
          <ul>
            <li><b>Benefits: </b></li>
            <li>Engagement in development and testing by business with features </li>
            <li>Better scope-creep prevention as business is more aware of features being developed </li>
            <li>Better BDD syntax</li>
          </ul>
          <ul>
            <li><b>Costs</b></li>
            <li>Framework overhead (having to write feature files, Step Definitions)</li>
            <li>Very new, somewhat unstable, little support, annoying debugging</li>
            <li>popularity in decline in Ruby</li>
          </ul>
        </p>
      </section>
      <section>
        <h3>BDD's goal of cross-functional teamwork?</h3>
        <p>There is tension between business documents and technical ones: </p>
      </section>
      <section>
        <p>Business is concerned with conveying intent in a timely, communicable fashion.</p>
        <pre><b>Scenario</b> free Delivery
<b>When</b> The customer has ordered 10 books
<b>Then</b> They should have free delivery</pre>
      </section>
      <section>
        <p>Techs are concerned with reusability, making it work.</p>
        <pre><b>Scenario</b> Free delivery 
<b>Given</b> The Customer is logged in
<b>And</b> The customer is on the "/orders" page
<b>And</b> the threshold for free delivery is "10" books 
<b>And</b> the customer is &lt;type&gt; with &lt;books&gt; in the cart 
<b>When</b> The customer clicks on "#order-button" 
<b>Then</b> "#delivery-cost-field" should be "$0"</pre>
      </section>
      <section>
        <p>If techs are editing the feature-files for reusability, what benefit are they getting over putting a simple comment above their tests? </p>
        <p><b>Solution:</b> abstract away low-level functionality with <a href="http://www.thoughtworks.com/insights/blog/using-page-objects-overcome-protractors-shortcomings">page-objects</a>, keep specs high-level</p>
      </section>
      <section>
        <h3>
          Architecture 
          <img width="100%" height="100%" src="images/architecture.png">
        </h3>
      </section>
      <section>
        <ul>
          <li>
            <h3>Implementation </h3>
          </li>
          <li>Addressing the problems of brittleness in selenium </li>
          <li>Screenshot testing and the benefits of the top-down approach </li>
          <li>Browsers in use </li>
          <li>The future: Mobile automation </li>
          <li>The Async problem </li>
        </ul>
      </section>
      <section>
        <ul>
          <li><b>NEARLY ALL PROTRACTOR ACTIONS ARE ASYNC!?!</b></li>
          <li>There are a large number of series operations required </li>
          <li>Particularly difficult for QA's  </li>
          <li>Protractor does make a good start on handling promises</li>
          <li>Solution: employ Async, Q, Co, chai-as-promised liberally </li>
          <li>gnode for anything you need with ES6</li>
        </ul>
      </section>
      <section>
        <ul>
          <li>
            <h3>The Brittleness Problem	</h3>
          </li>
          <li>Page Drivers</li>
          <li>Data Automation Tags</li>
          <li>Page inheritance</li>
        </ul>
      </section>
      <section>
        <ul>
          <li>
            <h3>Looking forward </h3>
          </li>
          <li>Apium</li>
          <li>Selendroid, Android, IOS automation</li>
          <li>Saucelabs and third-party testing platforms</li>
          <li>IOS automation</li>
        </ul>
      </section>
      <section>
        <h3>Anything of interest here? </h3>
        <p>make new mistakes, don't repeat ours. Example repo: </p><a>http://bit.ly/1tSflCT</a>
        <p>Criticism, suggestions appreciated.</p>
        <p>dporter@seek.com.au</p>
      </section>
    </article>
    <script src="build/build.js"></script>
  </body>
</html>